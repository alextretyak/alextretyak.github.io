<html>
<head>
<meta charset="utf-8" />
<base target="_blank">
<script type="text/javascript">
function spoiler(element, event)
{
    if (event.target.nodeName == 'A' || event.target.parentNode.nodeName == 'A' || event.target.onclick)//чтобы работали ссылки в спойлерах и спойлеры2 в спойлерах
        return;
    var e = element.firstChild.nextSibling.nextSibling;//element.getElementsByTagName('span')[0]
    e.previousSibling.style.display = e.style.display;//<span>…</span> must have inverted display style
    e.style.display = (e.style.display == "none" ? "" : "none");
    element.firstChild.style.fontWeight =
    element. lastChild.style.fontWeight = (e.style.display == "" ? "normal" : "bold");
    event.stopPropagation();
    //[-Чтобы была возможность выделять текст внутри раскрытого ‘скрытого текста’/спойлера, необходимо [скрытие/]закрытие спойлера делать не просто по нажатию левой кнопки мыши, а по отпусканию левой кнопки мыши при условии отсутствия движения курсора [мыши] после того, как была нажата левая кнопка мыши.-]
}
function spoiler2(element, event)
{
    element.nextSibling.style.display = (element.nextSibling.style.display == "none" ? "" : "none");
}
</script>
<style type="text/css">
div#main, td {
    font-size: 14px;
    font-family: Verdana, sans-serif;
    line-height: 160%;
    text-align: justify;
}
span.cu_brackets_b {
    font-size: initial;
    font-family: initial;
    font-weight: bold;
}
a {
    text-decoration: none;
    color: #6da3bd;
}
a:hover {
    text-decoration: underline;
    color: #4d7285;
}
h1, h2, h3, h4, h5, h6 {
    margin: 0;
    font-weight: 400;
}
h1 {font-size: 200%; line-height: 130%;}
h2 {font-size: 180%; line-height: 135%;}
h3 {font-size: 160%; line-height: 140%;}
h4 {font-size: 145%; line-height: 145%;}
h5 {font-size: 130%; line-height: 140%;}
h6 {font-size: 120%; line-height: 140%;}
span.sq {color: gray; font-size: 0.8rem; font-weight: normal; /*pointer-events: none;*/}
span.sq_brackets {color: #BFBFBF;}
span.cu_brackets {cursor: pointer;}
span.cu {background-color: #F7F7FF;}
abbr {text-decoration: none; border-bottom: 1px dotted;}
pre {margin: 0;}
pre, code {font-family: 'Courier New'; line-height: normal}
ul, ol {margin: 11px 0 7px 0;}
ul li, ol li {padding: 7px 0;}
ul li:first-child, ol li:first-child {padding-top   : 0;}
ul  li:last-child, ol  li:last-child {padding-bottom: 0;}
table {margin: 9px 0; border-collapse: collapse;}
table th, table td {padding: 6px 13px; border: 1px solid #BFBFBF;}
span.spoiler_title {
    color: #548eaa;
    cursor: pointer;
    border-bottom: 1px dotted;
}
div.spoiler_text {
    /*border: 1px dotted;*/
    margin: 5px;
    padding: 3px;
}
blockquote {
    margin: 0 0 7px 0;
    padding: 7px 12px;
}
blockquote:not(.re) {border-left:  0.2em solid #90ddaa; background-color: #fbfffb;}
blockquote.re       {border-right: 0.2em solid #90ddaa; background-color: #f4fff8;}
div.note {
    padding: 18px 20px;
    background: #ffffd7;
}
pre.code_block {padding: 6px 0;}
pre.inline_code {
    display: inline;
    padding: 0px 3px;
    border: 1px solid #E5E5E5;
    background-color: #FAFAFA;
    border-radius: 3px;
}
img {vertical-align: middle;}

div#main {width: 100%;}
@media screen and (min-width: 1050px) {
    div#main {width: 1024px;}
}
</style>
</head>
<body>
<div id="main" style="margin: 0 auto">
<h3><a href="http://compiler.su/prodolzhenie-tsikla-i-vykhod-iz-nego.php">Продолжение цикла и выход из него (ссылка на статью)</a></h3>
<br />
Комментарии:<br />
<hr />
2024-10-23 <i><b>bvz</b></i><br />
<br />
Такое чувство, что проблема искусственно создана на ровном месте. Специально, чтобы потом триумфально разрешить её с помощью оператора goto. Кроме циклов for, между прочим, существуют также ещё и циклы while и until. Что мешает использовать один из них? Пусть условие надо_выйти_из_цикла с отрицанием добавлено через конъюнкцию в самый внешний цикл while. И тогда на каждом шаге этого самого внешнего цикла будет проверяться истинность условия надо_выйти_из_цикла.<br />
<br />
Собственно говоря, циклы for, по-моему, придумали с одной единственной целью: избавиться от записи i=i+1 внутри цикла и включить её в заголовок. В некоторых случаях это, может, и удобно. Но если в данном конкретном случае цикл for не подходит, зачем нужно насильно его использовать?<br />
<hr />
2024-10-23 <i><b>Автор сайта</b></i><br />
<br />
Не знаю, искусственным ли путём образовалась проблема или естественным. Однако до сих пор для выхода из нескольких циклов используют либо «goto»<br />
<pre class="code_block">
цикл &lt;проверка условия>
    цикл &lt;проверка условия>
        если &lt;дополнительная проверка условия>
            goto &lt;метка>
    // конец второго цикла
// конец первого цикла
&lt;метка>:
</pre>
либо заменитель «goto» («break» с меткой)<br />
<pre class="code_block">
цикл &lt;проверка условия>
    цикл &lt;проверка условия>
        если &lt;дополнительная проверка условия>
            break &lt;метка>
    // конец второго цикла
// конец первого цикла
&lt;метка>:
</pre>
либо пользуются самым длинным вариантом — создают дополнительные переменные с дополнительными танцами с бубнами:<br />
<pre class="code_block">
надо_выйти_из_цикла = ложь
цикл &lt;проверка условия>
    цикл &lt;проверка условия>
        если &lt;дополнительная проверка условия>
            надо_выйти_из_цикла = истина
            break
    // конец второго цикла
    если надо_выйти_из_цикла
        break
// конец первого цикла
&lt;метка>:
</pre>
Независимо от вида цикла: «while», «until», «for».<br />
<br />
<blockquote>чтобы потом триумфально разрешить её с помощью оператора goto.</blockquote>
Вы невнимательно читали. Как раз-то этот вариант<br />
<pre class="code_block">
цикл &lt;проверка условия>
    цикл &lt;проверка условия>
        если &lt;дополнительная проверка условия>
            break N  // N -число циклов, которые надо покинуть
</pre>
и самый лаконичный, и самый прозрачный. Для него не нужны ни метки (как для «goto» и «break» с меткой), ни дополнительные переменные.<br />
<hr />
2024-10-24 <i><b>bvz</b></i><br />
<br />
Автор сайта, ладно, я понял вашу мысль. Лаконичный — это значит, краткий, правильно? Но ведь не всегда краткий = изящный. Изящность, как и красота — вещь довольно субъективная. На мой взгляд, изящно было бы писать программу, придерживаясь один раз принятых принципов. Например, не использовать оператор goto. И никогда не отступая от них. Но вы и не использовали, вы использовали break N.<br />
<br />
Короче, я бы всё равно писал по-своему. Я только не понял, предлагал ли кто-нибудь выше мой вариант. А что касается искусственности созданной проблемы — проблема эта возникает в тот момент, когда "бывают такие ситуации, когда условие выхода удобнее проверить не в заголовке цикла, а «по месту требования»." Так вот, я бы просто поместил это условие именно в заголовок каждого цикла. Руки бы у меня от этого не отвалились. Удобство или неудобство может возникнуть на стадии понимания программы. Но опять-таки, не думаю, что такую программу будет намного труднее понять.<br />
<br />
И более того. Если вы всегда записываете условие выхода в заголовок цикла, все такие программы будут выглядеть одинаково. Вне зависимости от количества вложенных циклов. Соответственно, исчезает возможность ошибиться на стадии break N. Например, написать break 6 вместо break 5. А может, и вовсе стоит написать рекурсивную процедуру для неограниченного числа вложенных "циклов".<br />
<br />
Хотя, строго говоря, такие алгоритмы, наверное, не будут эквивалентными. Если я проверяю некое условие в заголовке каждого цикла, я делаю дополнительное действие, правильно? Значит, программа будет медленнее работать. Но я такими вещами никогда не заморачивался, честно говоря.<br />
<hr />
2024-10-26 <i><b>alextretyak</b></i><br />
<br />
<blockquote>Так вот, я бы просто поместил это условие именно в заголовок каждого цикла.</blockquote>
Не во всех языках программирования в заголовок цикла <b>for</b> можно вставить дополнительное условие.<br />
Например, в том же Python нет универсального цикла <b>for</b>. И для выхода из нескольких циклов приходится, как уже было сказано выше «создавать дополнительные переменные с дополнительными танцами с бубнами».<br />
<br />
Вот конкретный пример.<br />
У меня есть Python-скрипт, которому требуется определить директорию с установленной Microsoft Visual Studio, <!--[[[причём самой]]]--><!--[[[как можно более новой версии]]]-->причём более новые версии должны быть в приоритете.<br />
Для этого я использовал такой вложенный цикл:<br />
<style>
span.keyword {color: #0000FF; font-weight: bold;}
span.identifier {color: #00009F;}
span.string-literal {color: #800000;}
span.numeric-literal {color: #008000;}
span.constant {color: #008000;}
span.comment {color: #808080;}
</style><pre class="code_block">
<span class="keyword">for</span> <span class="identifier">version</span> <span class="keyword">in</span> [<span class="string-literal">'2022'</span>, <span class="string-literal">'2019'</span>, <span class="string-literal">'2017'</span>, <span class="string-literal">'2015'</span>, <span class="string-literal">'2013'</span>]:
    <span class="keyword">for</span> <span class="identifier">edition</span> <span class="keyword">in</span> [<span class="string-literal">'BuildTools'</span>, <span class="string-literal">'Community'</span>, <span class="string-literal">'Enterprise'</span>, <span class="string-literal">'Professional'</span>]:
        <span class="keyword">if</span> <span class="identifier">os</span>.<span class="identifier">path</span>.<span class="identifier">isfile</span>(<span class="string-literal">'C:\\Program Files (x86)\\Microsoft Visual Studio\\'</span> + <span class="identifier">version</span>
                          + <span class="string-literal">'\\'</span> + <span class="identifier">edition</span> + <span class="string-literal">R'\VC\Auxiliary\Build\vcvarsall.bat'</span>):
            ... <span class="comment"># здесь нужно выйти из всех циклов</span>
</pre>
<br />
Но недавно этот скрипт пришлось поправить, так как оказалось, что 2022-ая студия может быть установлена не в "C:\Program Files (x86)", а в "C:\Program Files".<br />
Вот ссылка на мой коммит с этой правкой: <a href="https://github.com/symasm/symasm/commit/7d2f432a9ef45784646a01662be874abb8ba17e7">https://github.com/symasm/symasm/commit/7d2f432a9ef45784646a01662be874abb8ba17e7</a>.<br />
В итоге код получился вот таким:<br />
<pre class="code_block">
<span class="identifier">was_break</span> = <span class="constant">False</span>
<span class="keyword">for</span> <span class="identifier">version</span> <span class="keyword">in</span> [<span class="string-literal">'2022'</span>, <span class="string-literal">'2019'</span>, <span class="string-literal">'2017'</span>, <span class="string-literal">'2015'</span>, <span class="string-literal">'2013'</span>]:
    <span class="keyword">for</span> <span class="identifier">edition</span> <span class="keyword">in</span> [<span class="string-literal">'BuildTools'</span>, <span class="string-literal">'Community'</span>, <span class="string-literal">'Enterprise'</span>, <span class="string-literal">'Professional'</span>]:
        <span class="keyword">for</span> <span class="identifier">x86</span> <span class="keyword">in</span> [<span class="numeric-literal">0</span>, <span class="numeric-literal">1</span>]:
            <span class="identifier">vcvarsall</span> = <span class="string-literal">'C:\\Program Files'</span> + <span class="string-literal">' (x86)'</span>*<span class="identifier">x86</span> + <span class="string-literal">'\\Microsoft Visual Studio\\'</span> + <span class="identifier">version</span> + <span class="string-literal">'\\'</span> + <span class="identifier">edition</span> + <span class="string-literal">R'\VC\Auxiliary\Build\vcvarsall.bat'</span>
            <span class="keyword">if</span> <span class="identifier">os</span>.<span class="identifier">path</span>.<span class="identifier">isfile</span>(<span class="identifier">vcvarsall</span>):
                <span class="identifier">was_break</span> = <span class="constant">True</span>
                <span class="comment">#print('Using ' + version + '\\' + edition)</span>
                <span class="keyword">break</span>
        <span class="keyword">if</span> <span class="identifier">was_break</span>:
            <span class="keyword">break</span>
    <span class="keyword">if</span> <span class="identifier">was_break</span>:
        <span class="keyword">break</span>
<span class="keyword">if</span> <span class="identifier">was_break</span>:
    <span class="identifier">masm_pathname</span> = <span class="identifier">subprocess</span>.<span class="identifier">check_output</span>(<span class="string-literal">'"'</span> + <span class="identifier">vcvarsall</span> + <span class="string-literal">'" x64 > nul &amp;&amp; where ml64'</span>, <span class="identifier">encoding</span> = <span class="string-literal">'ascii'</span>).<span class="identifier">rstrip</span>()
    <span class="identifier">open</span>(<span class="string-literal">'masm_pathname.txt'</span>, <span class="string-literal">'w'</span>).<span class="identifier">write</span>(<span class="identifier">masm_pathname</span>)
<span class="keyword">else</span>:
    <span class="identifier">print</span>(<span class="string-literal">'''Unable to find vcvarsall.bat!
If you do not have Visual Studio 2013, 2015, 2017, 2019 or 2022 installed please install it or Build Tools for Visual Studio from here[https://visualstudio.microsoft.com/downloads/].'''</span>)
    <span class="identifier">masm_pathname</span> = <span class="string-literal">'-'</span>
</pre>
<br />
Видите замечательную лесенку из <pre style="display: inline"><span class="keyword">if</span> <span class="identifier">was_break</span></pre>?<br />
И теперь представьте, что вам запросто может потребоваться добавить ещё один вложенный цикл <b>for</b>.<br />
<br />
А если использовать язык программирования с возможностью выхода из нескольких циклов, например 11l, то код получится значительно проще:<br />
<pre class="code_block">
<span class="keyword">loop</span>(<span class="identifier">version</span>) [<span class="string-literal">‘2022’</span>, <span class="string-literal">‘2019’</span>, <span class="string-literal">‘2017’</span>, <span class="string-literal">‘2015’</span>, <span class="string-literal">‘2013’</span>]
   <span class="keyword">loop</span>(<span class="identifier">edition</span>) [<span class="string-literal">‘BuildTools’</span>, <span class="string-literal">‘Community’</span>, <span class="string-literal">‘Enterprise’</span>, <span class="string-literal">‘Professional’</span>]
      <span class="keyword">loop</span>(<span class="identifier">x86</span>) [<span class="numeric-literal">0</span>, <span class="numeric-literal">1</span>]
         <span class="keyword">var</span> <span class="identifier">vcvarsall</span> = <span class="string-literal">‘C:\Program Files’</span>(<span class="string-literal">‘ (x86)’</span>*<span class="identifier">x86</span>)<span class="string-literal">‘\Microsoft Visual Studio\’</span><span class="identifier">version</span><span class="string-literal">‘\’</span><span class="identifier">edition</span><span class="string-literal">‘\VC\Auxiliary\Build\vcvarsall.bat’</span>
         <span class="keyword">if</span> <span class="identifier">fs</span>:<span class="identifier">is_file</span>(<span class="identifier">vcvarsall</span>)
            <span class="comment">//print(‘Using ’version‘\’edition)</span>
            <span class="identifier">masm_pathname</span> = <span class="identifier">os</span>:(<span class="string-literal">‘"’</span><span class="identifier">vcvarsall</span><span class="string-literal">‘" x64 > nul &amp;&amp; where ml64’</span>).<span class="identifier">stdout</span>.<span class="identifier">rtrim</span>(<span class="string-literal">"\n"</span>)
            <span class="identifier">File</span>(<span class="string-literal">‘masm_pathname.txt’</span>, <span class="identifier">WRITE</span>).<span class="identifier">write</span>(<span class="identifier">masm_pathname</span>)
            <span class="keyword">loop</span>(<span class="identifier">version</span>).<span class="identifier">break</span>

<span class="keyword">loop.was_no_break</span>
   <span class="identifier">print</span>(<span class="string-literal">‘Unable to find vcvarsall.bat!
If you do not have Visual Studio 2013, 2015, 2017, 2019 or 2022 installed please install it or Build Tools for Visual Studio from here[https://visualstudio.microsoft.com/downloads/].’</span>)
   <span class="identifier">masm_pathname</span> = <span class="string-literal">‘-’</span>
</pre>
<br />
Конструкция <b>loop(version).break</b> осуществляет выход из соответствующего цикла (в языке 11l меток нет).<br />
Вместо неё можно использовать эквивалентную (при данном количестве вложенных циклов!) конструкцию: <b>^^loop.break</b>.<br />
Я выбрал символы крышечки (^) вместо числа после <b>break</b>, так как:<br />
<ol>
<li>не очевидно с какого числа начинается отсчёт, с 0 или с 1 (в PHP начинается с 1, т.е. просто <b>break</b> равнозначен <b>break 1</b>, а чтобы прервать внешний цикл, нужно использовать <b>break 2</b>, но в программировании нумерацию принято начинать с 0, т.е. было бы логично, что просто <b>break</b> равнозначен <b>break 0</b>... в общем, возможна путаница; с крышечками же логика проще — если их нет, то <b>loop.break</b> он и в Африке... осуществляет выход только из текущего цикла, если одна крышечка, то выходим из вышестоящего цикла по отношению к текущему, если крышечки две, то идём ещё выше (сам этот символ символизирует направление вверх, потому он и был выбран) и т.д.);</li>
<li>число после <b>break</b> создаёт ощущение, что вместо него можно подставить какое-то целочисленное выражение и написать например <b>break 2+3</b> или вообще вставить какую-<!--[[[то/]]]-->нибудь переменную:<br />
<pre class="code_block">
<span class="keyword">loop</span> ...
    <span class="keyword">loop</span> ...
       <span class="keyword">loop</span> ...
          <span class="identifier">int</span> <span class="identifier">entered_number</span> = <span class="identifier">int</span>(<span class="identifier">input</span>(<span class="string-literal">‘Сколько циклов вы хотите покинуть?’</span>))
          <span class="identifier">break</span> <span class="identifier">entered_number</span>
</pre></li>
</ol>
<br />
Более «монолитно», чем <b>break 2</b>, выглядит запись <b>break_2</b>, но так сделать в языке программирования не получится<!--[[[ —]]]-->, т.к. break_2 может быть действительным именем переменной/идентификатором.<br />
<br />
Но если вернуться к исходной проблеме — лесенке из <pre style="display: inline"><span class="keyword">if</span> <span class="identifier">was_break</span></pre>, то есть и друго<!--[[[й выход]]]-->е решение — поместить необходимую логику внутрь функции, которая вместо <b>break</b> будет делать <b>return</b>.<br />
Но мне не нравится такое решение — нужно придумывать имя для новой функции, которая используется только в одном месте и только для обхода ограничения используемого языка программирования. Похоже на костыль.<br />
<br />
<blockquote>Хотя для применения «continue N» не очень легко привести пример из жизни для иллюстрации его полезности. Возможно, читатели этих строк предложат что-то в комментариях к статье.</blockquote>
Предложат-предложат. :)(:<br />
<br />
Вот два наиболее интересных встретившихся мне примера, в которых было бы оправдано применение «continue N»:<br />
<ol>
<li>В транспайлере Python → 11l вот <a href="https://github.com/11l-lang/python_to_11l/blob/f54b0475ebbceaea280e1b9eca6eab99069f2f4f/parse.py#L3053-L3056">эти 4 строки</a> не самого понятного Python-кода можно заменить одной строкой <b>^loop.continue</b> (аналог <b>continue 2</b>).</li>
<li>Этот <a href="https://rosettacode.org/wiki/Peaceful_chess_queen_armies#D">код на языке D</a> использует <b>continue &lt;метка></b> <span class="sq"><span class="sq_brackets">[</span>и, как видно по этой же веб-странице, эту конструкцию поддерживают также языки Go, Java, Kotlin, Swift<span class="sq_brackets">]</span></span>, но т.к. Python такого не поддерживает, пришлось усложнить логику путём добавления двух else-веток для for — <a href="https://github.com/11l-lang/_11l_to_cpp/blob/master/tests/python_to_cpp/Rosetta%20Code/p.txt#L2272">вот этот перевод на Python</a>.</li>
</ol>
Там же на rosettacode.org можно поискать ещё хорошие примеры употребления <b>continue &lt;метка></b> (вдруг я что-то упустил).<br />
</div>
</body>
</html>